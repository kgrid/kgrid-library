<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<link rel="shortcut icon"
	href="images/MiniIconObjectTeller.ico" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	crossorigin="anonymous">
<!-- Optional theme -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
	integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
	crossorigin="anonymous">
<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/bannercontent.css"
	type="text/css" />
<link rel="stylesheet" href="css/datagrid.css"
	type="text/css" />
<link rel="stylesheet" href="css/button.css"
	type="text/css" />
<link rel="stylesheet" href="css/l_overlay.css"
	type="text/css" />
<link rel="stylesheet" href="css/navigation.css"
	type="text/css" />
<link rel="stylesheet" href="css/librarysetting.css"
	type="text/css" />
<link rel="stylesheet" href="css/formstyle.css"
	type="text/css" />
<link rel="stylesheet" href="css/tab.css" type="text/css" />
<link rel="stylesheet" href="css/ot.css" type="text/css" />
<title>OBJECT TELLER in Vue </title>
<script type="text/javascript"
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
	integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
	crossorigin="anonymous"></script>
<script
	src="https://unpkg.com/vue@2.0.2/dist/vue.js"></script>
<script type="text/javascript" src="https://unpkg.com/vue-router@2.0.0"></script>
<script type="text/javascript" src="js/lodash.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/jquery.validate.js"></script>
<script src="js/ot.js"></script>
<script src="js/date.format.js"></script>
</head>
<body>
	<div id="app">
		<div class="ot-nav">
			<router-link class="navbar-brand ot-1 .router-link-active" to="/">
				<img alt="Brand" src="images/logo.png">
			</router-link>
			<nav class="navbar navbar-default navbar-fixed-top ot-1">
				<div class="container-fluid ot-1">
					<div class="navbar-header ot-1">
						<button type="button" class="navbar-toggle collapsed ot-1"
							data-toggle="collapse"
							data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse ot-1"
						id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav">
							<li><router-link to="/about">About</router-link></li>
							<li><router-link to="/faq">FAQ</router-link></li>
							<li><router-link to="/contactus">Contact Us</router-link></li>

						</ul>
						<ul class="nav navbar-nav navbar-right ot-1">
							<li class="login-link1" v-on:click="login_click"><a>Log In</a></li>
							<li class="signup-link"><a id="signupBtn">Sign Up</a></li>
						</ul>
					</div>
					<!-- /.navbar-collapse -->
				</div>
				<!-- /.container-fluid -->
			</nav>
		</div>

		<router-view></router-view>

		<loginOverlay></loginOverlay>
		<objeditor></objeditor>
	</div>
	<template id="layout">
		<div class="ot-content">
			<button class="greenroundbutton ot-backtotop" v-on:click='backToTop()'>
				<img src="images/Chevron_Icon.png">
			</button>
			<div class="whitebacking">
				<div class="wrapper">
					<div class="ot-banner" v-if="nothelper">
						<slot name="banner"></slot>		
			</div></div></div>
			<div class="header" v-if="nothelper">
				<div class="headercontainer">
					<div class="headercol">
						<slot name="header"></slot> 
			</div></div></div>
			<div class="e6backing">
				<div class="wrapper">
					<div class="datagrid">
						<slot name="maincontent"></slot>
					</div>
					<div class="m_logo_footer" v-if="nothelper==false">
						<img src="images/blue-transparentbg.png" width="60px"	height="auto" />
					</div>
				</div>
			</div>
		</div>
	</template>
	<template id="ko-list">
		<div class="content">
			<div id="bannerbk">
				<img src="images/bannerBackground.png">
			</div>
			<appLayout :nothelper="true">
				<div slot="banner">
					<h1>
						ObjectTeller supports Health Knowledge Services<br> <small>by
					providing a repository toolkit for storing, curating, managing and
					making computable health knowledge accessible for learning health
					systems. </small>
					</h1>
				</div>
				<div slot="header">
				<div class="row">
						<div class="col-md-6 ot-search">
							<span class="ot-glybtn glyphicon glyphicon-search"></span> <input
								placeholder="Search" v-model="filterString" />
						</div>
						<div class="col-md-1"></div>
						<div class="col-md-2 ot-count">{{countString}}</div>
						<div class="col-md-2">
							<select class="ot-select" v-model="sortKey">
								<option value="metadata.title">Title</option>
								<option value="uri">Object ID</option>
								<option value="metadata.lastModified">Last Updated</option>
							</select>
						</div>
						<div class="col-md-1">
							<button v-on:click="toggleOrder()">
								<span v-if="orderAsc"
									class="ot-glybtn glyphicon glyphicon-sort-by-attributes"></span>
								<span v-else
									class="ot-glybtn glyphicon glyphicon-sort-by-attributes-alt"></span>
							</button>
						</div>
					</div></div>
				<div slot="maincontent">
					<ul>
						<li v-for="object in orderedList"><ko-tile :object="object"
								:listsize="listSize" v-on:clicked="objectSelected"></ko-tile></li>
					</ul>
				</div>
			</appLayout>
		</div>
	</template>
	<template id="ko-tile-template"> 
		<router-link v-bind:to="objLink" v-on:click.native="clicked">
			<div class="container ot-tile" v-bind:id="object.uri">
				<div class="row ot-2">
					<div class="col-md-1 ot-type">
						<img v-if="object.metadata.published" src="images/LittleGreenDot.png" width="10px"	height="auto" />
					</div>
					<div class="col-md-10 ot-title" data-toggle="tooltip"
							data-placement="top" v-bind:title="object.metadata.title">{{object.metadata.title}}
					</div>
					<div class="col-md-1 ot-empty ">
						<button class="edit" v-on:click="deleteObject()">
							<span class="glyphicon glyphicon glyphicon-trash"></span>
						</button>
					</div>
				</div>
				<div class="row ot-2">
					<div class="col-md-1 ot-empty"></div>
					<div class="col-md-11 ot-owner">{{object.metadata.owner}}</div>
				</div>
				<div class="row ot-2">
					<div class="col-md-1 ot-empty "></div>
					<div class="col-md-5 ot-keywords">Keyword:{{object.metadata.keywords}}</div>
					<div class="col-md-3 ot-id">
						<span class="ot-left">Object ID: {{object.uri}}</span>
					</div>
					<div class="col-md-3 ot-udate">
						<span class="ot-right">Last Updated: <span v-text="formattedlastModified"></span></span>
					</div>
				</div>
			</div>
		</router-link> 
	</template>
	<template id="obj-detail">
	<div class="content">
		<appLayout :nothelper="true">
		<div slot="banner">
			<div id="goback">
				<div id="backButton">
					<a href="/ObjectTeller/home">BACK TO THE LIBRARY</a>
				</div>
			</div>
			<div id="ko-title">
				<div style="width: 10px; hieght: 60px; display: inline-block;">
					<img v-if="objModel.viewObject.metadata.published"
						src="images/LittleGreenDot.png" width="10px"
						height="auto" />
				</div>
				<h1>
					<small id="page_title_v">{{objModel.viewObject.metadata.title}}</small>
				</h1>
			</div>
			<div class="date">
				<div class="id">
					<p class="date-title">Object ID:</p>
					<p class="date-data">
						<span>{{objModel.viewObject.uri}}</span>
					</p>
				</div>
				<div class="date1">
					<p class="date-title">Last Updated:</p>
					<p class="date-data">
						<span v-text="formattedUpdateDate"></span>
					</p>
				</div>
				<div class="date2">
					<p class="date-title">Created On:</p>
					<p class="date-data">
						<span v-text="formattedCreateDate"></span>
					</p>
				</div>
			</div>
		</div>
		<div slot="header">
					<ul class="nav nav-tabs" role="tablist" id="tabs">
						<li role="presentation" class="labels"><a
							href="#metadata" aria-controls="metadata" role="tab"
							data-toggle="tab">METADATA</a></li>
						<li role="presentation" class="labels"><a href="#payload"
							aria-controls="payload" role="tab" data-toggle="tab">PAYLOAD</a></li>
						<li role="presentation" class="labels"><a href="#inputMessage"
							aria-controls="input" role="tab" data-toggle="tab">INPUT</a></li>
						<li role="presentation" class="labels"><a href="#outputMessage"
							aria-controls="output" role="tab" data-toggle="tab">OUTPUT</a></li>
						<li role="presentation" class="labels accessLevelOne"><a
							href="#logData" aria-controls="logdata" role="tab"
							data-toggle="tab">LOG DATA</a></li>
						<li role="presentation" class="labels accessLevelOne"><a
							href="#" aria-controls="logdata" role="tab" data-toggle="tab">
								<div class="labels iconBtn accessLevelOne">
									<img class="hover-out"
										src="images/More_Icon_Light-01.png" /> <img
										class="hover-in" style="display: none;"
										src="images/More_Icon_Dark-01.png" />
								</div>
						</a></li>
					</ul>
					<div class="inline editwrapper accessLevelOne" id="objBtns"
						style="top: 4px; right: 40px; position: absolute;">
						<button class="edit" id="metadataeditBtn" v-on:click="editObj">EDIT</button>
						<button class="edit" id="deleteButton"
							onclick="deleteObject('${fedoraObject.URI}')">DELETE</button>
						<a class="edit" id="downloadButton" v-bind:href="downloadLink">DOWNLOAD</a>
			</div>
		</div>
			<div slot="maincontent">
					<ul class="tab-content" id="tab">
						<li v-for="section in sections" v-bind:id="section.name" role="tabpanel"
							class="tab-pane">
								<tab-pane v-bind:section="section.name" v-bind:object="objModel.viewObject" ></tab-pane>
						</li>
					</ul>
				</div>
			</appLayout>
	</div>
	</template>
	<template id= "tab-panel-template">
		<div class="tab-content view-obj">
			<ul>
				<li class="ot-viewlist" v-for="field in filteredFields">
					<field-tile :field="field" :object="object" :isDisabled=isDisabled></field-tile>
				</li>
			</ul>
		</div>
	</template>
	<template id="field-tile-template">
	<div class="addtext" :id="field.name">
		<h4>{{field.title}}</h4>
		<input :type="field.type" class="metaEdit" disabled v-bind:value="value" 
			v-if="isInput" />
		<textarea class="metaEdit autosize" disabled  v-bind:value="value"
			v-if="isTextArea">{{value}}</textarea>
		<linkedfield-tile v-if="isLicense" v-bind:link="value.licenseName"
			v-bind:value="value.licenseLink"></linkedfield-tile>
		<div class='entryArea' id='citation_entries' v-if="isCitation">
			<ul class="list">
				<li v-for="citation in value">
				<linkedfield-tile :value="citation.citation_title" :link="citation.citation_at"></linkedfield-tile>
				</li>
			</ul>
		</div>
	</div>
	</template>
	<template id="linkedfield-tile-template"> 
	   <a v-bind:href="link">{{value}}</a> 
	</template>

<template id="overlaylayout">
	<div class="ol_pane" v-show="showOverlay.show">
		<div class="sidebar_close">
			<h3>CLOSE</h3>
			<button class="greenroundbutton" id="close_overlay"	v-on:click="closeOverlay">
				<img src="images/Close_Icon.png" >
			</button>
		</div>
		<div class="overlay-top"></div>
		<div class="overlay-board">
				<div class="overlay-title">
					<slot name="ol-title"></slot>
				</div>
				<div class="entryform" id="entry_form">
					<slot name="ol-form"></slot>
					<slot name="ol-btn"></slot> 
					</div>
					</div>
				<div class="overlay-alert">
					<div class="alert-box processing"><slot name="ol-processing"></slot></div>
					<div class="alert-box success"><slot name="ol-success"></slot></div>
					<div class="alert-box failure"><slot name="ol-failure"></slot></div>
					<div class="alert-box warning"><slot name="ol-warning"></slot></div>
				</div>
			</div>
	</div>

</template>
<template id="objEditor_overlay">
<div class="layered_overlay" id="objEditor_overlay" v-show="showObjectEditor.show">
<transition name="slide">
	<overlaylayout v-on:slideout="olSlideout"> 
		<div slot="ol-title"><h3>{{editObjModel.editObject.metadata.title}}</h3>
			<div id="barcontainer">
				<ul class="inEdit" id="edittabs">
					<li class="labels active">METADATA</li>
					<li class="labels">PAYLOAD</li>
					<li class="labels">INPUT</li>
					<li class="labels">OUTPUT</li>
				</ul>
				<div id="editWrapper">
					<button class="edit" id="cancelBtn">UNDO</button>
					<button class="edit" id="saveObjButton" v-on:click="saveObj">SAVE&CLOSE</button>
								</div>
			</div>
		</div>
		<div slot="ol-form">
		<ul class="inEdit" id="edittab">
					<li class="active current-tab" id="metadata">
						<fieldset class="fieldcontainer" id="first">
							<div id="metadata_fields">
								<div class="addtext">
									<h4>TITLE</h4>
									<input type="text" class="metaEdit" v-model="editObjModel.editObject.metadata.title" />
								</div>
							<div class="addtext">
									<h4>DESCRIPTION</h4>
									<input type="textarea" class="metaEdit" v-model="editObjModel.editObject.metadata.description" />
								</div>
								<div class="addtext">
									<h4>KEYWORDS</h4>
									<input type="text" class="metaEdit" v-model="editObjModel.editObject.metadata.keywords" />
								</div>
								<div class="addtext">
									<h4>OWNERS</h4>
									<input type="text" class="metaEdit" v-model="editObjModel.editObject.metadata.owner" />
								</div>
								<div class="addtext">
									<h4>CONTRIBUTORS</h4>
									<input type="text" class="metaEdit" v-model="editObjModel.editObject.metadata.contributors" />
								</div>
								
						</fieldset>
					</li>
					<li id="payload">
						
							<div id="payload_fields">
							<div class="addtext">
								<h4> FUNCTION NAME (REQUIRED)
								</h4>
								<div class="addtext">
									<input class="textbox inEdit" type="text" id="functionName"
										placeholder="one instance only" maxlength="140"><span>140/140</span>
								</div>
								</div>
								<div class="addtext">
									<h4>ENGINE TYPE
									</h4>
									<select required class="options" id="engineType">
										<option value="Python">PYTHON</option>
									</select> <br>
								</div>
<!-- 								<div v-if="inputfile==false">
							<div id="payloadDropFile" class="dropfile">
								<div class="upload-direction">
									<input type="file" @change="onpayloadFileChange" class="inputfile"
										data-multiple-caption="{count} files selected" multiple /> <label
										for="file_output" id="filecount"> <img
										src="images/Upload_Icon.png"> <br>
										<p class="green">CHOOSE_FILE</label>
									</p>
									</label>
								</div>
							</div>
						</div>
						<div v-else>
								<button v-on:click="removepayloadFile">Remove</button>
								<input type="textarea" id="payloadTextArea"
									v-model="editObjModel.editObject.inputMessage">
								</textarea>
						</div>
						</div> -->

						</li>
					<li id="input">
<!-- 							<div id="input_fields">
						<div v-if="inputfile==false">
							<div id="inputDropFile" class="dropfile">
								<div class="upload-direction">
									<input type="file" @change="oninputFileChange" class="inputfile"
										data-multiple-caption="{count} files selected" multiple /> <label
										for="file_output" id="filecount"> <img
										src="images/Upload_Icon.png"> <br>
										<p class="green">CHOOSE_FILE</label>
									</p>
									</label>
								</div>
							</div>
						</div>
						<div v-else>
								<button v-on:click="removeInputFile">Remove</button>
								<input type="textarea" id="inputTextArea"
									v-model="editObjModel.editObject.inputMessage">
								</textarea>
						</div>
						</div> -->
					</li>
				<li id="output">
					<div id="output_fields">
						<div v-if="outputfile==false">
							<div id="outputDropFile" class="dropfile">
								<div class="upload-direction">
									<input type="file" @change="onFileChange" class="inputfile"
										data-multiple-caption="{count} files selected" multiple /> <label
										for="file_output" id="filecount"> <img
										src="images/Upload_Icon.png"> <br>
										<p class="green">CHOOSE_FILE</label>
									</p>
									</label>
								</div>
							</div>
						</div>
						<div v-else>
								<button v-on:click="removeFile">Remove</button>
								<input type="textarea" id="outputTextArea"
									v-model="editObjModel.editObject.outputMessage">
								</textarea>
						</div>
					</div>
				</li>
			</ul>
		</div>
		<div slot="ol-btn"></div>
		<div slot="ol-processing">Processing...</div>
		<div slot="ol-success">Update Successful !!!</div>
		<div slot="ol-failure">Update Failure! </div>
		<div slot="ol-warning">Warning !!!</div>
		
	</overlaylayout>
	</transition>
</div>
</template>

<template id="login_overlay">
<div class="layered_overlay" id="login_overlay" v-show="showLogin.show">
<transition name="slide">
	<overlaylayout v-on:slideout="olSlideout"> 
		<div slot="ol-title"><h3>Log in</h3></div>
		<div slot="ol-form">
			<fieldset class="fieldcontainer" id="first">
								<div class="loginField">
									<h4 title="username">USERNAME</h4>
									<div class="addtext">
										<input class="textbox login" name="username"
											id="username" type="text" spellcheck="false"
											placeholder="Enter your email"
											maxlength="140">
<!-- 											<button class="edit_btn" >Need to create an account?</button>
 -->									</div>
									<label class="errorLabel" for="username"> </label>
								</div>
								<div class="loginField">
									<h4 title="password">PASSWORD</h4>
									<div class="addtext">
										<input class="textbox login" name="password" id="password"
											type="password" spellcheck="false"
											placeholder="Enter your password"
											maxlength="140">
											<!-- <button class="edit_btn">Forgot Password?</button> -->
									</div>
									<label class="errorLabel" for="password"> </label>
								</div>
				</fieldset>
		</div>
		<div slot="ol-btn">
			<input class="done_btn login" name="done" id="login_btn" type="button" value="LOG IN">
		</div>
		<div slot="ol-processing">Log in ...</div>
		<div slot="ol-success">Update Successful !!!</div>
		<div slot="ol-failure">Unable to login. Please check your username and password! </div>
		<div slot="ol-warning">Warning !!!</div>
		
	</overlaylayout>
	</transition>
</div>
</template>

	<script src="js/ot-vue.js"></script>
</body>
</html>